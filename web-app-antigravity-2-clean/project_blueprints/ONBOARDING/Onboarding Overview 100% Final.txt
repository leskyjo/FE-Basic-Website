Onboarding Overview 100% Final


Felon Entrepreneur — Onboarding Overview (Revised)
0. Purpose of this document

This document defines the entire first-time experience for the Felon Entrepreneur web app, from the moment a user hits the public site until they become an active member inside the app.

It is the master onboarding story that all other onboarding blueprints and build prompts must follow, specifically for:

The end-to-end user journey:
Public landing → account creation → onboarding → Life Plan generation → first dashboard experience → Starter usage → 7-Day Pro-Lite Trial offer → paid Plus/Pro

Front-end behavior and visuals on desktop, laptop, tablet vs mobile

Back-end routing and state transitions (Next.js App Router)

Database fields and relationships (Supabase Postgres)

Security model and RLS (row-level security) for all onboarding and tier logic

AI placement and credit accounting rules

Tier transitions and payment lifecycle implications

Email/notification events tied to onboarding milestones and tier events

Naming rules (final)

Always: Life Plan (never “Life Goal Plan”)

Questionnaire name: Life Plan Questionnaire

1. Tech + architecture assumptions

These are assumed and must be respected by any builder:

Frontend: Next.js App Router, React, TypeScript, Tailwind CSS

Backend: Next.js Route Handlers (server routes) + Supabase Postgres

Auth: Supabase Auth

DB + Access control: Supabase Postgres with RLS (row-level security)

Rendering: mix of Server Components + Client Components where needed

Layout groups (conceptual)

(public) — landing page, login, signup

(onboarding) — onboarding steps (name, location, bridge, questionnaire)

(app) — authenticated app pages (dashboard, plan, jobs, courses, profile, etc.)

AI integration (security-first)

AI calls are server-controlled only

Clients never call AI providers directly (no secret keys in client)

Every AI endpoint enforces entitlements + credit/limit checks server-side

2. High-level phases of the user journey

From a cold visitor’s perspective, there are seven phases:

Landing-only marketing (no account, no nav, no tools)

Account creation (/signup)

Onboarding tunnel (Name → Location → Bridge → Life Plan Questionnaire)

Life Plan generation + first dashboard experience

Starter AI Credits: credits granted and consumed across AI-enabled pages

Starter Mode ongoing (weekly AI credit refresh + premium tool gating)

Upgrade path: 7-Day Pro-Lite Trial → converts to Plus or reverts to Starter → user may also upgrade to Pro

All UX, routing, and access control must reinforce this sequence.

3. Phase 1 — Public landing (no account, pure marketing)
3.1 Core rule

Before a user creates an account or logs in, they see one single landing page and nothing else:

No app navigation

No access to tools or AI

Only marketing, education, and calls-to-action (CTAs) leading to account creation

3.2 Routes

GET / → Public landing page

Any attempt to access /dashboard, /plan, /jobs, /courses, etc. while logged out:

Redirect to / with messaging, or

Show a minimal gate that routes to /login or /signup

Implementation: middleware or route guards

3.3 Landing page (desktop/laptop/tablet visuals)

Header

Left: FE logo (click → /)

Right: two buttons

Log In (secondary) → /login

Join Free (primary) → /signup

No other nav items, no hamburger

Hero

Large headline + sub-headline

Hero video or background video

Primary CTA: “Start My Life Plan” → /signup

Body sections

What FE is (Life Plan, Jobs, Courses, Resources, Tools preview)

Feature showcases (Life Plan, Jobs, Courses, Resources)

Testimonials/social proof

Security & Privacy section

Final CTA block

Footer

Terms → /terms

Privacy → /privacy

Contact/Help → /help (or email link)

3.4 Landing page (mobile visuals)

Same content, but optimized for mobile:

Header

Left: FE logo

Right: small Log In + Join Free buttons

No hamburger

No bottom nav

Hero

Vertical stack

Video sized for mobile

Large thumb-friendly CTA

Body

Stacked sections

Repeat CTAs between sections

Footer

Same as desktop

3.5 Backend & security on landing

No personalized data queries

No AI endpoints

Logged-out users are funneled back to / and/or /login

4. Phase 2 — Account creation (signup + login)
4.1 Sign-up flow

Routes

GET /signup → Signup page

POST /signup → Supabase Auth sign-up

Frontend UI

Email

Password

Confirm password

Accept Terms & Privacy checkbox

Submit

Success behavior

Create profiles row

Redirect to /onboarding/name

Backend

Use Supabase Auth signUp

After user is created:

Create profiles row with safe defaults (see DB section)

Email (optional but recommended)

Welcome email:

Confirms account created

Encourages completing onboarding and questionnaire

4.2 Login flow

Routes

GET /login → Login page

POST /login → Supabase Auth sign-in

Success behavior

If onboarding incomplete → send to correct onboarding step

If onboarding complete → /dashboard

5. Phase 3 — Onboarding tunnel (Name → Location → Bridge → Life Plan Questionnaire)
Key rule: No global navigation during onboarding

During onboarding there is:

No bottom nav

No header nav

No direct access to app sections

Only minimal FE logo and step controls

5.1 Onboarding routes

/onboarding/name

/onboarding/location

/onboarding/bridge

/onboarding/questions

Each step:

Requires authenticated session

Enforces onboarding_step so users cannot skip ahead

Writes to DB as the user progresses

5.2 Onboarding UI behavior by device (must be followed exactly)
Desktop/Laptop/Tablet

Centered onboarding card with constrained width

Minimal FE logo above or within the card header

Step title + supporting copy

Primary “Next” button (large)

Secondary “Back” button where applicable

Progress indicator (steps 1–4)

Mobile

Full-width card or near full-width container with safe padding

Larger touch targets

Sticky or bottom-anchored primary button recommended (thumb-friendly)

Progress indicator remains visible but compact

No bottom nav, no hamburger, no header tabs

5.3 Data captured during onboarding

Step 1: preferred_name

Step 2: zip_code

Step 3: bridge acknowledgment (no major data requirement besides step advance)

Step 4: questionnaire answers saved to questionnaire_answers.answers_json

5.4 Step-by-step
Step 1: /onboarding/name

Frontend

“Preferred name” input

Validation: non-empty + length limits

Backend

Update profiles.preferred_name

profiles.onboarding_step = max(current, 1)

Step 2: /onboarding/location

Frontend

ZIP code field (5 digits)

Optional confirmation of city/state later

Backend

Update profiles.zip_code

profiles.onboarding_step = max(current, 2)

Step 3: /onboarding/bridge

Purpose

Explain what Life Plan is

Reassure user about privacy and safety

Short video

Frontend

Title: “Welcome to your Life Plan”

Copy + short video

Button: “Start My Life Plan Questionnaire”

Backend

profiles.onboarding_step = max(current, 3)

Redirect to /onboarding/questions

Step 4: /onboarding/questions (Life Plan Questionnaire)

Frontend

Multi-step questionnaire UI

Large tappable options + some free-text

Autosave after each answer change

Resume where they left off

Backend

Table: questionnaire_answers

Autosave: upsert user’s answer record

Final submit:

Validate required questions

profiles.onboarding_step = 4

Trigger Life Plan generation

Email (optional)

Reminder if user stalls:

“Finish your Life Plan Questionnaire…”

6. Phase 4 — Life Plan generation and first dashboard
6.1 Generation trigger

When user submits final questionnaire and clicks “Generate My Life Plan”:

Frontend

Confirmation state (“We’re creating your Life Plan now…”)

Calls POST /api/life-plan/generate

Redirects to /dashboard

Backend endpoint

Validates:

authenticated

onboarding complete (onboarding_step >= 4)

Reads profile + questionnaire answers

Inserts ai_generations row (server-only)

Dispatches async AI job

On success: write life_plans row

On failure: mark ai_generations failed, retain error

6.2 Data model — life_plans + ai_generations

life_plans

id (UUID)

user_id (FK)

version

plan_status (active/archived)

plan_data (JSONB)

summary (text)

plan_title (text)

created_at, updated_at

source_generation_id (optional FK)

ai_generations

id

user_id

type

status (queued/running/succeeded/failed)

input_snapshot (JSONB)

output_snapshot (JSONB or summary)

error_message

created_at, updated_at

Security

User can read own plans

Client cannot insert plans/generations; server-only

6.3 First dashboard visit states (device-specific)

Route: /dashboard
Access: authenticated + onboarding complete

State A: Plan generating

Top card:

Animation (pulsing globe)

“We’re wiring your Life Plan now.”

Button: “Refresh Status”

“View Life Plan” disabled/hidden

State B: Plan ready

Top card:

“Your Life Plan is ready.”

Summary

Primary button: “View Life Plan” → /plan

State C: Generation failed

Error card

Buttons:

Retry generation (rate-limited)

Contact support

Mobile

Cards stack vertically

Primary buttons are full width

Avoid dense multi-column layouts

Desktop/Tablet

Cards can be grid-layout

Still keep primary CTA obvious

7. AI placement & credit accounting (updated to final rules)
7.1 Where AI exists

AI is not available on:

Landing

Signup/login

Any onboarding step

AI becomes available only:

After onboarding completion and user is inside the app

AI appears on AI-enabled pages (examples):

/plan (Life Plan assistant)

/jobs (job insights assistant)

/courses or FE hub tools area

7.2 Universal AI Credits (final rules)

Credit grant

User receives 10 Universal AI Credits upon account creation (post-signup), stored server-side.

Credit usage

Every time the user submits something to AI anywhere in the app, it consumes 1 credit.

Credit refresh

Credits refresh every 7 days.

Refresh is enforced server-side using:

a timestamp (starter_ai_reset_at) and

server logic to reset credits atomically.

Important

Credits are tier-relevant primarily for Starter.

Plus/Pro may have their own usage caps (soft/hard) but are not governed by the Starter credit UI.

7.3 Front-end behavior of AI chat (device-specific)

All AI-enabled pages

Show one universal AI chat panel

Include small “Credits remaining: X” indicator when relevant (Starter)

When credits are zero:

show locked state

show upgrade CTA and/or trial CTA

Mobile

Chat panel should be thumb-accessible:

bottom sheet or bottom-fixed panel

Avoid blocking key page content

Use expand/collapse

Desktop/Tablet

Side panel or bottom-right docked panel is acceptable

Ensure it does not overlay critical UI

7.4 Back-end enforcement for AI credits

All AI endpoints must:

authenticate user

load profiles.tier

apply reset logic if now >= starter_ai_reset_at

check available credits

decrement credits atomically (transaction/RPC)

log an append-only usage_events record

8. Premium tools & entitlements (updated)
8.1 Application Assistant (final rules)

Single purchase available for any tier: $2.99 per single use

Starter: 1 sample use granted

Trial: 3 total uses

Plus: 15/month

Pro: 30/month

8.2 Resume Builder (final rules)

Single purchase available for any tier: $3.99 per single use

Starter: 0

Trial: 0

Plus: 5/month

Pro: 10/month

8.3 Life Plan Regeneration (final rules)

Single purchase available for any tier: $2.99 per regeneration

Starter: 0 included

Trial: 1 included

Plus: 4/month

Pro: 8/month

9. Phase 7 — 7-Day Pro-Lite Trial → Paid Plus / Pro (updated)
9.1 Trial definition

Trial name: 7-Day Pro-Lite Trial

Trial is a distinct tier state:

tier = trial

It is not labeled “Plus Trial” or “Pro Trial”

It is “Pro-Lite” in value proposition

9.2 Starting the trial

Trigger moment: user hits a meaningful limit or tries locked features, then sees trial/upgrade prompts.

Flow:

User clicks “Start 7-Day Pro-Lite Trial”

Billing flow requires a submitted and approved payment method (Stripe checkout/portal)

On success, webhook sets:

tier = trial

trial dates (trial_started_at, trial_ends_at)

subscription_status reflects trialing/canceling states

9.3 Trial capability scope (must match tier blueprint)

Trial = Pro-Lite

AI allowed (subject to throttles/limits)

Application Assistant allowed (3 total uses)

Resume Builder still locked (0 included)

Life Plan regeneration included: 1

9.4 Trial end behavior (final policy)

At trial_ends_at:

If user did not cancel:

Convert to Plus by default

tier = plus

subscription_status = active

If user canceled before 7 days are up:

Automatically revert to Starter

tier = starter

subscription_status = none (or canceled/ended depending on audit model)

This conversion must be handled via Stripe webhooks and server-side logic only.

10. Navigation visibility — full lifecycle (unchanged, but reaffirmed)
10.1 Public (Landing, Login, Signup)

Desktop/Tablet:

Header: logo + Log In + Join Free only

No nav tabs
Mobile:

Same, no hamburger, no bottom nav

10.2 Onboarding (all steps)

No global nav

No bottom nav

Minimal FE logo + onboarding step controls

10.3 Post-Onboarding (inside app)

Once onboarding complete:
Desktop/Tablet:

Full header nav (as defined in nav blueprint)
Mobile:

Bottom nav (Home, Plan, FE button, Jobs, Profile) + hamburger for additional items (as defined in nav blueprint)

11. Database + enforcement model (updated for final tier + usage system)
11.1 Core tier columns (final)

Use:

tier: starter | trial | plus | pro

subscription_status: none | trialing | active | canceling | canceled | past_due (exact enum may vary; must support audit)

11.2 Rolling weekly resets + monthly usage periods

The system must support:

Weekly Starter credit refresh

Monthly entitlements for Plus/Pro (resume/app assistant/lifeplan regen)

Trial fixed allowances (e.g., app assistant uses, life plan regen)

11.3 Required tables (minimum)

profiles

user_id (PK)

tier

subscription_status

tier_updated_at

onboarding_step

onboarding_complete (optional convenience boolean)

preferred_name

zip_code

starter_ai_credits_remaining

starter_ai_reset_at

starter_app_assist_sample_used (boolean)

trial_started_at

trial_ends_at

created_at, updated_at

usage_periods (monthly counters)

user_id

period_start, period_end

resume_generations_count

application_assists_count

lifeplan_regens_count

ai_messages_count (optional but useful)

usage_events (append-only audit)

user_id

event_type (ai_chat, resume_generate, app_assist, plan_regen, trial_start, tier_change, etc.)

metadata (jsonb)

created_at

Server inserts only

entitlements / purchases (recommended)

track single-use purchases (resume/app assist/life plan regen)

must be server-verified and non-spoofable

11.4 Security / RLS requirements (non-negotiable)

Client must never be allowed to write:

tier

subscription_status

trial dates

credit counters

usage counters

“remaining uses” values

Enforcement:

RLS blocks writes to money fields

Triggers and/or server-only RPCs (remote procedure calls (database functions callable securely)) prevent tampering

Only server role writes to tier/usage/credits tables

Users may read their own usage values (for UI meters), but cannot modify them

12. Email flows linked to onboarding & access (updated wording, same intent)

At minimum:

Welcome (post-signup)

Onboarding incomplete reminder

Life Plan ready

Credits low / credits exhausted

Weekly credit refresh notice (optional, can be in-app only)

Trial started (7-Day Pro-Lite Trial)

Trial reminder (2–3 days left)

Trial ending soon (tomorrow)

Trial converted to Plus

Trial canceled → reverted to Starter

Payment failure / subscription canceled

Recommended: email_events table for audit:

id, user_id, type, payload, sent_at, provider_message_id, delivery_status

13. Implementation checklist (builder-ready)

Builder must implement:

Public landing / (marketing-only; no nav)

Supabase Auth signup/login + profiles creation

Onboarding routes /onboarding/* with strict step enforcement

Questionnaire autosave + final submit trigger

Life Plan generation pipeline (/api/life-plan/generate, ai_generations, life_plans)

Dashboard state cards (generating/ready/failed) with correct device layout

Universal AI chat on AI-enabled pages

Starter AI Credits:

grant 10 at signup

consume 1 per AI submission anywhere

refresh every 7 days server-side

Premium tool entitlement system:

Application Assistant: sample + tier counts + single purchase $2.99

Resume Builder: Plus/Pro monthly counts + single purchase $3.99

Life Plan regen: tier counts + single purchase $2.99

7-Day Pro-Lite Trial:

billing entry, webhook-driven tier changes

trial cancel → revert to starter

trial end w/o cancel → convert to plus

usage_periods + usage_events logging and audit

Email/notification triggers per lifecycle rules

All “money fields” server-only writes (RLS + RPC + triggers)