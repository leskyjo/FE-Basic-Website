WEB_BLUEPRINT — CENTER FE BUTTON / FE HUB

(MOBILE-FIRST FEATURE; MOBILE-ONLY OVERLAY UI)

This blueprint defines the center FE button and FE Hub overlay as a mobile-only overlay feature inside the Felon Entrepreneur web app.

It is the source of truth for:

Frontend: visual layout, components, interactions, responsiveness

Backend: API routes, logic, data flows, tier enforcement

Database: tables, columns, relationships, RLS (row-level security (access rules at the row level in the database))

Security: auth, permissions, rate limits, anti-abuse

Email & notifications: what may be triggered by FE Hub usage

Settings: user preferences related to FE Hub features

All prompts for builders (Codex, etc.) should be derived from this blueprint.

0. Scope & Principles
0.1 Purpose of the FE Button / FE Hub

The FE button is:

A center button in the mobile bottom navigation.

A “portal” into high-value experiences that are designed to feel:

quick,

motivating,

and rewarding to use daily.

The FE Hub (what opens when you tap FE) must:

Load fast (single summary request).

Be low-friction (no complex sub-navigation).

Reflect the user’s current state:

Life Plan phase

Courses ownership & progress

Cheat Codes engagement

Weekly progress indicators (“Tiny Wins”)

FE Hub includes (locked requirements):

Courses & Training (included inside FE Hub)

Cheat Codes (included inside FE Hub)

Daily Boost (AI-generated motivational message; tier-aware)

Tiny Wins (micro journaling / progress reinforcement)

Important: FE Hub is a surface (UI entry point). Courses and Cheat Codes still have their own full pages/routes. FE Hub is the “quick portal” to them.

0.2 Alignment with Onboarding Overview (Critical)

The FE button and FE Hub must never appear:

On the public landing page (/)

On /login or /signup

During any onboarding route (/onboarding/*)
Because onboarding explicitly has no global navigation (no bottom nav and no header nav). 

Onboarding Overview 100% Final

Therefore, FE button visibility is gated by:

authenticated session exists, and

onboarding is complete, and

device breakpoint is mobile.

0.3 Mobile-Only Overlay Constraint (Clarified)

On mobile:

FE button exists in the bottom nav.

FE button toggles FE Hub overlay (bottom sheet).

On tablet and desktop/laptop:

The FE Hub overlay does not exist.

The FE button does not exist in the header.

Equivalent access is via standard navigation links inside the authenticated app:

Courses → /fe/courses

Cheat Codes → (dedicated route defined below; inside app)

If Daily Boost / Tiny Wins are later exposed on desktop/tablet, that is a Phase 2 decision. For this blueprint, they remain FE Hub-only.

1. Navigation Structure (Mobile vs Desktop)
1.1 Mobile Bottom Navigation (Authenticated App Only)

On mobile inside the authenticated app:

Bottom navigation items (left → right):

Home → /dashboard

Plan → /plan

FE (center) → opens FE Hub overlay (no route change)

Jobs → /jobs

Profile → /profile

Key behavior:

FE is the only nav item that opens an overlay instead of routing.

Bottom nav exists only after onboarding is complete. 

Onboarding Overview 100% Final

1.2 Desktop / Laptop / Tablet Header (No FE Button)

Inside the authenticated app on desktop/tablet:

Header includes:

Left: FE logo / brand

Nav links like: Home, Plan, Courses, Jobs, Profile

(Optional) a top nav link for Cheat Codes if desired; otherwise Cheat Codes is reachable via an FE menu entry

There is:

No center FE button

No FE Hub overlay

2. FE Button & FE Hub — Mobile Frontend UX
2.1 FE Button (Mobile Visual & Interaction)

Component: <FeNavButton /> (inside bottom nav).

Visual:

Circular button, larger than other nav icons

Centered in the bottom nav bar

Slight elevation (shadow)

Subtle glow accent consistent with FE brand

Icon content:

FE letters (“FE”) or FE bubble mark

Interaction:

Tap:

If FE Hub is closed → open FE Hub overlay

If FE Hub is open → close FE Hub overlay

Long press (optional): tooltip “Open FE Hub” (not required for MVP)

State management:

isFeHubOpen: boolean lives at the app layout level (context/state).

When open:

Underlying screen dims

Focus shifts to FE Hub

2.2 FE Hub Overlay (Mobile Only)

Component: <FeHubOverlay />

Render rule:

Only render when:

isFeHubOpen === true

AND viewport is mobile breakpoint

AND session exists

AND onboarding complete

Presentation:

Slide-up bottom sheet

Rounded top corners

Height: ~70–80% of viewport

Backdrop: dark overlay + subtle blur

Close behaviors:

Tap “X” close icon

Tap FE button again

Tap darkened backdrop

Swipe down (ideal; optional)

Header content (top of sheet):

Left: small FE icon

Center: “FE Hub”

Right: X close icon

Mini status strip (one line):

Example:

“Phase: Rebuilding | 2 courses owned | 3 Tiny Wins this week”

This data comes from the FE Hub summary endpoint.

Scroll behavior:

Sheet content can scroll vertically if needed, but keep it concise.

3. FE Hub Cards & Behaviors (Mobile Only)

FE Hub cards must remain visible even when locked, but locked cards must show:

lock icon

short reason

upgrade CTA
(as required by Tier & Access gating rules). 

TIERS AND ACCESS REVISED

3.1 Card 1 — Courses & Training (REQUIRED)

Component: <FeHubCoursesCard />

Visual:

Icon: graduation cap or play symbol

Title: “Courses & Training”

Subtitle:
“Learn real skills and turn them into real work.”

Dynamic state:

If coursesOwnedCount > 0:

Show: “You own X course(s).”

If a primary course exists:

“Continue: [Course Title]”

Progress bar (e.g., 35%)

Interaction:

Tap card:

Navigate to /fe/courses

Close FE Hub

Access rules:

Courses exists only inside authenticated app (no public catalog). 

Onboarding Overview 100% Final

No tier lock for viewing Courses inside the app, but:

Purchasing may show tier-discount messaging (Plus/Pro) if your pricing model includes it.

Course ownership controls lesson playback.

3.2 Card 2 — Cheat Codes (REQUIRED)

Component: <FeHubCheatCodesCard />

Purpose:

“Cheat Codes” are short, tactical, high-impact guidance modules.

They are designed to be:

quick to consume,

actionable,

motivating,

and tied to real-world progress.

Visual:

Icon: key / bolt / unlock

Title: “Cheat Codes”

Subtitle:
“Short, tactical moves that help you win this week.”

Dynamic state examples:

“New Cheat Code available today”

“Last completed: [title]”

“Streak: X days” (optional)

Interaction:

Tap card:

Navigate to /fe/cheat-codes (authenticated route)

Close FE Hub

Cheat Codes route rules:

/fe/cheat-codes — list

/fe/cheat-codes/[id] — detail

Tier logic:

By default, Cheat Codes are available to all onboarded users (Starter+).

If you later decide to gate some Cheat Codes by tier, implement as:

locked modules visible with upgrade CTA, consistent with Tier & Access gating UI rules. 

TIERS AND ACCESS REVISED

3.3 Card 3 — Daily Boost (AI; Tier-Aware)

Component: <FeHubDailyBoostCard />

Purpose:

Generate a short motivational message tailored to the user’s Life Plan phase.

Visual:

Icon: lightning bolt / spark

Title: “Daily Boost”

Subtitle: “One short message based on where you’re at.”

States:

A) Boost exists today

Show 1–3 sentence message

Buttons:

“Copy”

(Optional) “Share” later

B) No boost yet today

Placeholder: “Tap below to get today’s Boost.”

Button: “Get Today’s Boost”

Interaction:

Tap “Get Today’s Boost” calls POST /api/fe-hub/daily-boost

Daily Boost Tier Enforcement (Changed to align with Universal AI rules)

Daily Boost is an AI request, therefore:

It must follow the Universal AI credit/limit system. 

TIERS AND ACCESS REVISED

Starter:

Consumes 1 universal AI credit when generating today’s boost.

If credits are 0:

show locked state:
“You’re out of AI credits. Refreshes on [DATE].”

show upgrade / trial CTA

Trial:

AI enabled without visible credit counter

Daily Boost allowed, but throttled/limited (anti-abuse)

Plus/Pro:

Daily Boost allowed, throttled as needed (anti-abuse)

Hard rule:

FE Hub does not create a “second AI system.”

It uses the same entitlements model as all AI endpoints. 

TIERS AND ACCESS REVISED

3.4 Card 4 — Tiny Wins (Non-AI)

Component: <FeHubTinyWinsCard />

Purpose:

Micro journaling: log small positive actions to reinforce forward momentum.

Visual:

Icon: checkmark / trophy

Title: “Tiny Wins”

Subtitle:
“Log one small win. Progress beats perfection.”

Content:

If user has wins in last 7 days:

“You’ve logged X Tiny Wins this week.”

Show last entry snippet + relative date

Input:

Single input or small textarea

Placeholder: “What’s one good thing you did today?”

Button: “Log Tiny Win”

Interaction:

On submit:

POST /api/fe-hub/micro-win

Validate length (max 250 chars)

Insert row (append-only)

Toast: “Nice. Keep stacking wins.”

Refresh summary strip

No tier gating required (safe feature).
Still requires auth + onboarding complete because FE Hub does.

4. Backend APIs for FE Hub (Server-Controlled Only)

All FE Hub endpoints:

Live under authenticated app

Require Supabase session

Enforce onboarding completion

Never call AI from the client

4.1 Summary Endpoint

GET /api/fe-hub/summary

Purpose:

Single call to populate all FE Hub cards and the status strip.

Server logic:

auth check

onboarding complete check

Load:

profiles (tier + credit state)

life_plans (phase_label)

courses (purchases + progress)

cheat codes (recent/next module state)

today’s daily boost (if exists)

tiny wins last 7 days

Return shape (example):

{
  "phaseLabel": "Rebuilding Step-by-Step",
  "tier": "starter",
  "starterAiCreditsRemaining": 7,
  "starterAiResetAt": "2025-12-20T00:00:00Z",
  "coursesOwnedCount": 2,
  "primaryCourse": { "id": "uuid", "title": "Intro to X", "progressPercent": 35 },
  "cheatCodes": { "newAvailable": true, "lastCompletedTitle": "..." },
  "dailyBoost": { "text": "…", "boostDate": "2025-12-15" },
  "tinyWinsThisWeekCount": 3,
  "lastTinyWin": { "text": "Applied to 2 jobs.", "createdAt": "..." }
}

4.2 Daily Boost Endpoint (AI)

POST /api/fe-hub/daily-boost

Behavior (canonical enforcement):

Auth check

Onboarding complete check

Resolve tier and enforce Universal AI rules: 

TIERS AND ACCESS REVISED

Starter:

apply weekly reset logic if now >= starter_ai_reset_at

if credits == 0 → reject with locked response

else decrement credits atomically

Trial/Plus/Pro:

enforce throttles/soft caps

If a boost for today already exists:

return existing text (do not spend another credit unless you intentionally implement a “regenerate” purchase later)

If no boost exists:

build prompt using life plan phase_label and high-level context

call AI server-side

insert into fe_daily_boosts

append usage_events event_type = ai_chat (or daily_boost) with metadata including context=fe_hub

return response

Important: “forceRegenerate” should not exist in user-facing UI unless it has a defined purchase or entitlement. Keep it admin-only.

4.3 Tiny Wins Endpoint

POST /api/fe-hub/micro-win

Auth + onboarding checks

Validate text

Insert into fe_micro_wins

Append usage_events event_type = tiny_win_logged (non-AI)

Return updated counts

5. Database Schema (Supabase) — FE Hub

FE Hub depends on existing canonical tables:

profiles (tier, subscription status, AI credits fields)

life_plans

courses tables

usage tracking: usage_periods and usage_events 

TIERS AND ACCESS REVISED

FE Hub adds:

5.1 fe_daily_boosts

Same table as original concept, but enforcement now ties into universal AI credits and usage_events.

Key constraints:

unique (user_id, boost_date)

RLS: user can select own rows

inserts should be server-side only in production

5.2 fe_micro_wins

Append-only wins log:

index by (user_id, created_at desc)

RLS select/insert own only

no client update/delete required

5.3 cheat_codes tables (required for FE Hub inclusion)

This blueprint requires a minimal Cheat Codes data model.

At minimum:

cheat_codes (catalog)

id, title, summary, body_content, is_published, created_at

cheat_code_progress (user state)

id, user_id, cheat_code_id, status (not_started/in_progress/completed), completed_at, created_at

RLS:

cheat_codes: readable to authenticated users when published

cheat_code_progress: user can select/insert/update own progress only

6. Security & Permissions (Non-Negotiable)
6.1 Auth & Onboarding Enforcement

FE Hub must not render unless:

authenticated

onboarding complete 

Onboarding Overview 100% Final

API endpoints must enforce the same checks server-side.

6.2 Money-Sensitive Fields (Tier & Usage)

Client must never write:

profiles.tier

profiles.subscription_status

trial timestamps

credit balances

usage counters

All enforcement and updates happen server-side (webhooks, RPCs, server endpoints). 

TIERS AND ACCESS REVISED

6.3 AI Key Security

AI provider keys never shipped to browser

All AI calls go through server endpoints

All AI calls append usage_events for audit

6.4 Rate Limiting & Anti-Abuse

Daily Boost:

1 generation/day maximum

Starter must spend 1 AI credit

Trial/Plus/Pro throttling still applies (per-minute and daily ceilings)

Tiny Wins:

rate limit spam inserts (e.g., max 20/day)

7. Emails & Notifications
7.1 MVP (No Mandatory FE Hub Emails)

By default:

FE Hub actions are in-app only:

toasts

locked modals

success states

No automatic emails are required to ship FE Hub.

7.2 Optional Settings-Driven Emails (Phase 2)

If you implement:

“Email me my Daily Boost”

“Email me my Tiny Wins weekly summary”

Then Settings must include toggles in Profile/Settings:

receive_daily_boost_email boolean

receive_weekly_tinywins_email boolean

A scheduled job can:

generate/send Daily Boost email (still must enforce credits/entitlements for Starter)

send weekly Tiny Wins summary

These are optional; do not block MVP.

8. Settings Implications

FE Hub creates or depends on these Settings:

Tier display badge (Starter/Trial/Plus/Pro)

Trial status and days remaining (in-app display)

AI credit visibility for Starter where relevant (including Daily Boost gating)

Notification preferences (optional Phase 2)

9. Mobile UI vs Desktop/Tablet UI (Explicit Differences)
9.1 Mobile

Bottom nav visible post-onboarding

FE center button present and glowing

FE Hub appears as bottom-sheet overlay

Cards are stacked vertically with thumb-friendly CTAs

Underlay dims when overlay is open

9.2 Desktop/Tablet

No FE button and no FE Hub overlay at all

Courses accessed through standard app navigation link /fe/courses

Cheat Codes accessed through standard app navigation link /fe/cheat-codes (or an FE menu entry)

Daily Boost and Tiny Wins are not surfaced on desktop/tablet in MVP (unless later decided)

10. Implementation Checklist (Builder-Ready)

Builder must implement:

FE button renders only when:

authenticated AND onboarding complete AND mobile breakpoint

FE Hub overlay with four cards:

Courses & Training → /fe/courses

Cheat Codes → /fe/cheat-codes

Daily Boost (AI, tier/credits enforced)

Tiny Wins (logging)

Endpoints:

GET /api/fe-hub/summary

POST /api/fe-hub/daily-boost (universal AI enforcement)

POST /api/fe-hub/micro-win

Tables + RLS:

fe_daily_boosts

fe_micro_wins

cheat_codes + cheat_code_progress

Usage audit:

append usage_events for AI + Tiny Wins inserts

Locked states consistent with Tier & Access gating UI rules